{"title":"3/ Markdown文法の基礎","markdown":{"yaml":{"title":"3/ Markdown文法の基礎","modified-date":"today","format":{"revealjs":{"footer":"Markdown文法の基礎"}},"metadata-files":["style/slide.yml"]},"headingText":"**1** はじめてのQuarto","containsRefs":false,"markdown":"\n\n```{r}\n#| include: false\npacman::p_load(tidyverse, gt)\n```\n\n{{< include _common.qmd >}}\n\n\n## とりあえずレンダー（1）\n\n1. File > New File > Quarto Document\n\n![](figs/markdown/render_1.png){fig-align=\"center\"}\n\n## とりあえずレンダー（2）\n\n2. 「Editor: User visual markdown editor」のチェックを外す\n\n![](figs/markdown/render_2.png){fig-align=\"center\"}\n\n## とりあえずレンダー（3）\n\n3. Sourceペイン上段の「Render」をクリック\n\n![](figs/markdown/render_3.png){fig-align=\"center\"}\n\n## とりあえずレンダー（4）\n\n4. ソースコードとViewerペインの出力物の対応関係を確認\n\n![](figs/markdown/render_4.png){fig-align=\"center\" width=80%}\n\n## Quartoファイルの構造\n\n````md\n---\nYAMLヘッダー\n---\n\nテキスト1\n\n```{{r}}\nチャンク\n```\n\nテキスト2\n````\n\n- [**YAMLヘッダー**]{.alert}：文書のメタ情報や見た目などに関する設定。**YAML文法**で記述\n- 本文\n   - [**テキスト**]{.alert}：そのまま出力される。**Markdown文法**で記述\n   - [**チャンク**]{.alert}：チャンク内の**Rコード**は評価され、出力される。\n\n# **2** Markdown文法\n\n## 様々なMarkdown記法\n\nQuartoのMarkdown記法は以下の記法をほとんど内包し、+ $\\alpha$の機能も多い。\n\n- CommonMark\n   - John Gruber[（とAaron Swartz）]{.small}が考案したMarkdown記法の標準化\n- GitHub Flavored Markdown[（GFM）]{.small}\n   - CommonMarkに表、自動リンク、取り消し線などを追加した記法\n- Markdown Extra、MultiMarkdown、Markua、...\n   - 脚注、数式、引用、相互参照、...\n\n\n## 改行と強調\n\n- 改行は必ず**2回改行**すること（1回改行は同じ行として認識される）\n\n:::: {.columns}\n::: {.column width=50%}\n**Input:**\n\n```md\n文章1\n文章2\n\n文章3\n```\n:::\n\n::: {.column width=50%}\n**Output:**\n\n文章1\n文章2\n\n文章3\n:::\n::::\n\n- イタリックは`*`、太字は`**`、取り消しは`~~`で囲む^[下線は用意されていないため、HTMLタグを使用する（`<u>`と`</u>`で囲むなど）。]。\n\n:::: {.columns}\n::: {.column width=50%}\n**Input:**\n\n```md\n*Italic*\n\n**太字**\n\n~~取り消し~~\n```\n:::\n\n::: {.column width=50%}\n**Output:**\n\n*Italic*\n\n**太字**\n\n~~取り消し~~\n:::\n::::\n\n## 見出し\n\n- 部、章、節、項、...の見出し（`#`の数が多いほど文字が小さくなる）\n   - `#`は6つまで\n- 章の見出しを`##`にするなら節は`###`、小節（または項）は`####`、...\n\n:::: {.columns}\n::: {.column width=50%}\n**Input:**\n\n```md\n# 見出し1\n\n## 見出し2\n\n### 見出し3\n\n#### 見出し3\n```\n:::\n\n::: {.column width=50%}\n**Output:**\n\n<font style=\"font-size:2em;font-weight:600;\">見出し1</font>\n\n<font style=\"font-size:1.75em;font-weight:600;\">見出し2</font>\n\n<font style=\"font-size:1.5em;font-weight:600;\">見出し3</font>\n\n<font style=\"font-size:1.25em;font-weight:600;\">見出し4</font>\n:::\n::::\n\n## リンク\n\n`[リンク文](URL)`：`[]`で囲まれた文章をクリックすると`()`内で指定したURLへ移動\n\n- `{target=\"_blank\"}`を付けると新しいタブで開くようになる[（Quarto仕様）]{.small}^[YAMLヘッダーで`link-external-newwindow: true`を指定すると、すべてのリンクが新しいタブで開くようになる。]。\n\n**Input:**\n\n```md\n[宋のHP](https://www.jaysong.net)\n\n[関大のHP](https://www.kansai-u.ac.jp/){target=\"_blank\"}\n```\n\n**Output:**\n\n[宋のHP](https://www.jaysong.net)\n\n[関大のHP](https://www.kansai-u.ac.jp/){target=\"_blank\"}\n\n## 脚注\n\n- 脚注の入れ方：`^[脚注の内容]`\n- 内容が長い場合、`[^識別子]`で脚注の位置だけ指定し、別の箇所に`[^識別子]: 脚注の内容`\n\n:::: {.columns}\n::: {.column width=50%}\n**Input:**\n\n```md\n家系ラーメン^[横浜]が食べたい。\n\nラーメン二郎[^jiro]も食べたい。\n\n[^jiro]: 港区（東京）\n```\n:::\n\n::: {.column width=50%}\n**Output:**\n\n家系ラーメン^[横浜]が食べたい。\n\nラーメン二郎[^jiro]も食べたい。\n\n[^jiro]: 港区（東京）\n:::\n::::\n\n## コメント\n\n出力に影響されないコメントを入れる場合\n\n- HTMLのコメント機能を使用：`<!--`と`-->`内に囲む\n   - `<!--`と`-->`の間の文章は出力されない\n- 自分用のメモ、とりあえず出力させない内容などに使用\n\n:::: {.columns}\n::: {.column width=50%}\n**Input:**\n\n```md\nこれは文章1です。\n\n<!--\nこれはコメントです。\n-->\n\nこれは文章2です。\n```\n:::\n\n::: {.column width=50%}\n**Output:**\n\nこれは文章1です。\n\n<!--\nこれはコメントです。\n-->\n\nこれは文章2です。\n:::\n::::\n\n## 箇条書き（順序なし）\n\n- `-` + 半角スペース + 内容\n   - 入れ子型の箇条書きは半角スペース2つ以上の字下げ\n   - `-`の代わりに`*`も可\n\n:::: {.columns}\n::: {.column width=50%}\n**Input:**\n\n```md\n- 項目1\n  - 項目1-1\n  - 項目1-2\n    - 項目1-2-1\n      - 項目1-2-1-1\n    - 項目1-2-2\n- 項目2\n- 項目3\n```\n:::\n\n::: {.column width=50%}\n**Output:**\n\n- 項目1\n  - 項目1-1\n  - 項目1-2\n    - 項目1-2-1\n      - 項目1-2-1-1\n    - 項目1-2-2\n- 項目2\n- 項目3\n:::\n::::\n\n## 箇条書き（順序あり）\n\n- `1.` + 半角スペース + 内容\n   - 番号は自動的に振られるが、`1.`の代わりに`2.`を使うと2からスタート\n   - `1.`、`2.`、`3.`、...の書き方も可（非推奨）\n\n:::: {.columns}\n::: {.column width=50%}\n**Input:**\n\n```md\n1. 項目1\n   1. 項目1-1\n   1. 項目1-2\n   1. 項目1-3\n2. 項目2\n   * 項目2-1\n   * 項目2-2\n3. 項目3\n```\n:::\n\n::: {.column width=50%}\n**Output:**\n\n1. 項目1\n   1. 項目1-1\n   3. 項目1-2\n   2. 項目1-3\n2. 項目2\n   * 項目2-1\n   * 項目2-2\n3. 項目3\n:::\n::::\n\n## 表\n\n- 行は改行（1回） + 列は`|`で表記\n- ただし、1行目（ヘッダー）と2行目（ボディー）の間には`-`を1つ以上入れる\n   - `:-`は左揃え、`-:`は右揃え、`:-:`は中央揃え（`-`のみは左揃え）\n\n:::: {.columns}\n::: {.column width=50%}\n**Input:**\n\n```md\n|ID   |Name |Height|Favorite|\n|:---:|-----|-----:|:-------|\n|1    |SONG |176   |Ramen   |\n|2    |Yanai|230   |Cat food|\n```\n:::\n\n::: {.column width=50%}\n**Output:**\n\n|ID   |Name |Height|Favorite|\n|:---:|-----|-----:|:-------|\n|1    |SONG |176   |Ramen   |\n|2    |Yanai|230   |Cat food|\n:::\n::::\n\n:::: {.columns}\n::: {.column width=50%}\n**Input:**\n\n```md\n|ID|Name|Height|Favorite|\n|:-:|-|-:|:-|\n|1|SONG|176|Ramen|\n|2|Yanai|230|Cat food|\n```\n:::\n\n::: {.column width=50%}\n**Output:**\n\n|ID|Name|Height|Favorite|\n|:-:|-|-:|:-|\n|1|SONG|176|Ramen|\n|2|Yanai|230|Cat food|\n:::\n::::\n\n## 図\n\n- `![代替テキスト](画像のパス/URL)`\n   - 代替テキストはキャプションとしても機能する\n\n**Input:**\n\n```md\n![R Cat](https://www.jaysong.net/imgs/favicon.png)\n```\n\n**Output:**\n\n![R Cat](https://www.jaysong.net/imgs/favicon.png)\n\n## 図の大きさ\n\n- `{width=図の幅}`を追加[（Quarto限定）]{.small}\n   -  例）`300`（300ピクセル）、`1in`（1インチ）、`25%`（画面の25%）\n\n:::: {.columns}\n::: {.column width=50%}\n**Input:**\n\n```md\n![Tiny cat](画像URL){width=30}\n\n![Big cat](画像URL){width=100}\n```\n:::\n\n::: {.column width=50%}\n**Output:**\n\n![Tiny cat](https://www.jaysong.net/imgs/favicon.png){width=30}\n\n![Big cat](https://www.jaysong.net/imgs/favicon.png){width=100}\n:::\n::::\n\n## 数式\n\n文中数式は`$数式$`、独立した行の数式は`$$`で囲む。\n\n:::: {.columns}\n::: {.column width=50%}\n**Input:**\n\n```md\n文中の数式：$e = mc^2$\n```\n:::\n\n::: {.column width=50%}\n**Output:**\n\n文中の数式の例：$e = mc^2$\n:::\n::::\n\n**Input:**\n\n```md\n$$\nF(x; \\mu, b) =\n\\begin{cases}\n   0.5 \\exp(\\frac{x - \\mu}{b})       & \\text{if} \\quad x < \\mu \\\\\n   1 - 0.5 \\exp(- \\frac{x - \\mu}{b}) & \\text{if} \\quad x \\geq \\mu\n\\end{cases}\n$$\n```\n\n**Output:**\n$$\nF(x; \\mu, b) =\n\\begin{cases}\n   0.5 \\exp(\\frac{x - \\mu}{b})       & \\text{if} \\quad x < \\mu \\\\\n   1 - 0.5 \\exp(- \\frac{x - \\mu}{b}) & \\text{if} \\quad x \\geq \\mu\n\\end{cases}\n$$\n\n## 複数の図表の配置\n\n`::: {layout-*=}`と`:::`の間に図表を入れる（`layout-ncol`、または`layout-nrow`）\n\n:::: {.columns}\n::: {.column width=50%}\n**Input:**\n\n````md\n::: {layout-ncol=4}\n![零号機](画像1のURL or パス)\n\n![初号機](画像2のURL or パス)\n\n![弐号機](画像3のURL or パス)\n\n![量産機](画像4のURL or パス)\n:::\n````\n\n**Output:**\n\n::: {layout-ncol=4}\n![零号機](figs/markdown/rcat_0.png){width=100}\n\n![初号機](figs/markdown/rcat_1.png){width=100}\n\n![弐号機](figs/markdown/rcat_2.png){width=100}\n\n![量産機](figs/markdown/rcat_3.png){width=100}\n:::\n:::\n\n::: {.column width=50%}\n**Input:**\n\n````md\n::: {layout-ncol=2}\n|ID   |Name |Favorite|\n|:---:|-----|:-------|\n|1    |SONG |Ramen   |\n\n|ID   |Name |Favorite|\n|:---:|-----|:-------|\n|2    |Yanai|Cat food|\n:::\n````\n\n**Output:**\n\n::: {layout-ncol=2}\n|ID   |Name |Favorite|\n|:---:|-----|:-------|\n|1    |SONG |Ramen   |\n\n|ID   |Name |Favorite|\n|:---:|-----|:-------|\n|2    |Yanai|Cat food|\n:::\n\n:::\n::::\n\n# **3** Rコードとの統合\n\n## Rコードの入れ方\n\n[**チャンク[（chunk）]{.small}**]{.alert}内で記述されたRコードは評価[（evaluation）]{.small}される。\n\n- チャンクは```` ```{r} ````で始まり、```` ``` ````で終わる。\n- ショートカットキー：Cmd + Option + I（macOS）、Ctrl + Alt + I（その他のOS）\n\n:::: {.columns}\n::: {.column width=50%}\n**Input:**\n\n````\n以下のRコードは評価されない\n\nsum(1:100)\n\n```{{r}}\n# 以下はRコードは評価される\nsum(1:100)\n```\n\n````\n:::\n\n::: {.column width=50%}\n**Output:**\n\n以下のRコードは評価されない\n\nsum(1:100)\n\n```{r}\n#| echo: true\n# 以下はRコードは評価される\nsum(1:100)\n```\n:::\n::::\n\n## インラインコード\n\n[**インラインコード**[（inline code）]{.small}]{.alert}：チャンク外[（=文章内）]{.small}に挿入するRコード\n\n- チャンク内のRコードはRコードと評価結果、両方出力されるが、インラインコードは評価[結果のみ]{.alert}出力される。\n- ```` `r ````と```` ` ````の間にコードを記述（`r`を省略すると[コードのみ]{.alert}出力）\n   - チャンク内のオブジェクトを参照することも可能\n\n:::: {.columns}\n::: {.column width=50%}\n**Input:**\n\n````\n1〜100の総和：`r \"\\x60r sum(1:100)\\x60\"`\n\n```{{r}}\nx <- c(1, 2, 3, 5, 7)\n```\n\n`sum(x)`の実行結果：`r \"\\x60r sum(x)\\x60\"`\n````\n:::\n\n::: {.column width=50%}\n**Output:**\n\n1〜100の総和：`r sum(1:100)`\n\n```{r}\n#| echo: true\nx <- c(1, 2, 3, 5, 7)\n```\n\n`sum(x)`の実行結果：`r sum(x)`\n:::\n::::\n\n# **4** チャンクオプション\n\n## チャンクオプション\n\nチャンクの最上段で指定（コードより後ろのオプションは無視される）\n\n- `#|` + 半角スペース + `オプション名:` + 半角スペース + `値`\n- 1つのチャンクに複数のオプションも可\n- 論理型の値は`TRUE`/`FALSE`でなく、`true`/`false`\n\n```{{r}}\n#| オプション1: 値\n#| オプション2: 値\nRコード\n```\n\n## 代表的なチャンクオプション\n\n- `label`、`cahce`、`dependson`\n- `echo`、`eval`、`include`、`collapse`\n- `error`、`message`、`warning`\n- 図に関連するオプション\n   - `fig-width`、`fig-height`、`out-width`、`out-height`、`fig-dpi`、`dev`など\n- レイアウト、キャプション、サブキャプション\n\n## label：チャンクのラベル\n\n- チャンクにラベル[（名前）]{.small}を付ける理由\n   - レンダー時エラーが発生した際、どのチャンクが問題かが分かる。\n   - 図表番号の相互参照[（後述）]{.small}\n   - 他チャンクとの依存関係の指定[（後述）]{.small}\n- 付け方：`#| label: ラベル名`\n   - 図（表）を生成するチャンクは接頭詞として`fig-`（`tab-`）を付ける。\n- ラベル指定によって処理結果や見た目が変わることはない\n\n:::: {.columns}\n::: {.column width=50%}\n**Input:**\n\n````\n```{{r}}\n#| label: my-chunk\nx <- 1:10\nsum(x)\n```\n````\n:::\n\n::: {.column width=50%}\n**Output:**\n\n```{r}\n#| label: my-chunk\n#| echo: true\nx <- 1:10\nsum(x)\n```\n:::\n::::\n\n## cache：処理結果の保存\n\n- チャンク内コードの実行時間が非常に長い場合\n   - `#| cache: true`：処理結果を最初のレンダー時に別途保存し、チャンク内コードに変更がない限り、その結果を参照\n- 注意：当該チャンクが別のチャンクに依存していても、当該チャンクのコードの変更がなければ処理結果は変わらない\n\n:::: {.columns}\n::: {.column width=50%}\n**Input:**\n\n````\n```{{r}}\nx <- 1:10\n```\n\n```{{r}}\n#| cache: true\nsum(x)\n```\n````\n:::\n\n::: {.column width=50%}\n**Output:**\n\n```{r}\n#| echo: true\nx <- 1:10\n```\n\n```{r}\n#| echo: true\nsum(x)\n```\n\n- しかし、1番目のコードが`x <- 1:100`になっても、２番目のコードは変わっていないため、`sum(x)`の結果は55のまま\n:::\n::::\n\n## dependson：チャンク間の依存関係\n\n- 依存されるチャンクにラベルを指定し、依存するチャンクには`dependson`オプションを追加\n\n:::: {.columns}\n::: {.column width=50%}\n**Example:**\n\n````\n```{{r}}\n#| label: my-chunk-01\nx <- 1:10\n```\n\n```{{r}}\n#| cache: true\n#| dependson: my-chunk-01\nsum(x)\n```\n````\n:::\n\n::: {.column width=50%}\n- これで問題なく作動したが、2026年1月12月現在、宋の環境では機能しない\n- `#| autodep: true`をすると、自動的に依存関係を検知してくれるらしいが、これも機能しない\n:::\n::::\n\n## echo、eval：コード、評価結果の出力\n\n- いずれも既定値は`true`\n   - `#| echo: false`：コードを出力しない（評価はする）\n   - `#| eval: false`：評価しない（コードは出力する）\n\n:::: {.columns}\n::: {.column width=50%}\n**Input（1）:**\n\n```{{r}}\n#| echo: false\nsum(1:100)\n```\n:::\n\n::: {.column width=50%}\n**Output（1）:**\n\n```{r}\n#| eval: true\n#| echo: false\nprint(\"Hi!\")\n```\n:::\n::::\n\n:::: {.columns}\n::: {.column width=50%}\n**Input（2）:**\n\n```{{r}}\n#| eval: false\nsum(1:100)\n```\n:::\n\n::: {.column width=50%}\n**Output（2）:**\n\n```{r}\n#| eval: false\n#| echo: true\nprint(\"Hi!\")\n```\n:::\n::::\n\n## include：評価のみ行う\n\n- `#| include: false`：コード、評価結果いずれも出力しない\n   - しかし、[**コードの評価は行う**]{.alert}。\n   - `echo: false`＆`eval: false`はコードを評価しない\n\n:::: {.columns}\n::: {.column width=50%}\n**Input:**\n\n````md\n```{{r}}\n#| include: false\nhidden_x <- 1:10\n```\n\n```{{r}}\nsum(hidden_x)\n```\n````\n:::\n\n::: {.column width=50%}\n**Output:**\n\n```{r}\n#| eval: true\n#| echo: true\n#| include: false\nhidden_x <- 1:10\n```\n\n```{r}\n#| eval: true\n#| echo: true\nsum(hidden_x)\n```\n:::\n::::\n\n## collapse：コードと評価結果をまとめる\n\nコードと評価結果を同一ブロックにまとめる（既定値は`false`）\n\n<!--\n- 縦スペースの節約\n- 対話型のコードなら可読性も上がる\n- 評価結果もブロックにはいるので、より文章と区分される\n-->\n\n:::: {.columns}\n::: {.column width=50%}\n**Input（1）:**\n\n```{{r}}\nprint(\"Hi!\")\nsum(1:100)\n```\n:::\n\n::: {.column width=50%}\n**Output（1）:**\n\n```{r}\n#| echo: true\nprint(\"Hi!\")\nsum(1:100)\n```\n:::\n::::\n\n:::: {.columns}\n::: {.column width=50%}\n**Input（2）:**\n\n```{{r}}\n#| collapse: true\nprint(\"Hi!\")\nsum(1:100)\n```\n:::\n\n::: {.column width=50%}\n**Output（2）:**\n\n```{r}\n#| echo: true\n#| collapse: true\nprint(\"Hi!\")\nsum(1:100)\n```\n:::\n::::\n\n## 各種メッセージの出力\n\n- 警告メッセージ（`warning`）、通常のメッセージ（`message`）のON/OFF\n   - 既定値は`true`\n   - {tidyverse}の読み込み、`read_csv()`によるファイルの読込時に表示されるメッセージが鬱陶しいなら`#| message:false`\n- `error`：エラーメッセージの出力\n   - 既定値（`false`）のままだと、レンダーが中止される\n   - `#| error: true`の場合、レンダーは中止されず最後のチャンクまで評価される。エラーメッセージは出力物に出力される。\n\n## 図の大きさ\n\n- 図そのものの大きさ：`fig-width`と`fig-height`\n   - 単位はインチ\n- 出力物上での大きさ：`out-width`と`out-height`\n   - 単位はインチ[（`3in`）]{.small}、センチ[（`8cm`）]{.small}、px[（`500px`）]{.small}、割合[（`75%`）]{.small}\n- 図の解像度：`fig-dpi`\n   - 既定値は96だが、PDF出力や印刷をする場合、最低でも300は必要\n   - 解像度が高いほどファイルのサイズが大ききなるため注意\n- 作図エンジン：`dev`\n   - `dev: ragg_png`にしておけば、とりあえず文字化けの心配はない[（{ragg}が必要）]{.small}\n   - すべてのチャンクに指定することは非効率的なので、YAMLヘッダーで指定することを推奨[（後述）]\n\n## 図表のキャプション\n\n- `fig-cap`（図）と`tbl-cap`（表）：ラベルと組み合わせると「図1. ...」\n   - 注意：図（表）を生成するチャンクのラベルは`fig-`（`tbl-`）で始める\n\n:::: {.columns}\n::: {.column width=50%}\n**Input:**\n\n```{{r}}\n#| tbl-cap: \"表のキャプション\"\ngt(iris[1:3,])\n```\n:::\n\n::: {.column width=50%}\n**Output:**\n\n```{r}\n#| echo: true\n#| tbl-cap: \"表のキャプション\"\ngt(iris[1:3,])\n```\n:::\n::::\n\n:::: {.columns}\n::: {.column width=50%}\n**Input（2）:**\n\n```{{r}}\n#| echo: false\n#| label: fig-myfig-01\n#| fig-cap: \"図のキャプション\"\nplot(rnorm(100), type = \"l\")\n```\n:::\n\n::: {.column width=50%}\n**Output（2）:**\n\n```{r}\n#| echo: false\n#| label: fig-myfig-01\n#| fig-cap: \"図のキャプション\"\nplot(rnorm(100), type = \"l\")\n```\n:::\n::::\n\n## 複数の図表の配置（1）\n\n- `#| layout-ncol: 2`にするとチャンク内の図は2列構成で配置される\n   - Rコードで生成される表（{gt}など）も可\n\n:::: {.columns}\n::: {.column width=50%}\n**Input:**\n\n```{{r}}\n#| layout-ncol: 2\nplot(1:10)\n\nplot(rnorm(10), type = \"l\")\n```\n:::\n\n::: {.column width=50%}\n**Output:**\n\n```{r}\n#| layout-ncol: 2\n#| echo: true\n#| fig-width: 3\n#| fig-height: 3\n#| fig-dpi: 120\nplot(1:10)\n\nplot(rnorm(10), type = \"l\")\n```\n:::\n::::\n\n## 複数の図表の配置（2）\n\n- `#| layout`でカスタムレイアウト　　　　　　　　　　　\n\n:::: {.columns}\n::: {.column width=50%}\n**Input:**\n\n```{{r}}\n#| layout: [[50, 50], [100]]\nplot(1:10)\n\nplot(rnorm(10), type = \"l\")\n```\n\n- 2行構成で1行目は図2枚を50%、50%の割合、2行目は1枚を配置した例\n   - `[49, -2, 49]`にすると、49% + 2%の余白 + 49%\n:::\n\n::: {.column width=50%}\n**Output:**\n\n```{r}\n#| layout: [[50, 50], [100]]\n#| echo: true\n#| fig-dpi: 120\nplot(1:10)\n\nplot(rnorm(10))\n\nplot(rnorm(10), type = \"l\")\n```\n:::\n::::\n\n## 複数の図表のキャプション（1）\n\n- `#| fig-cap:`（`tbl-cap`）後に改行し、`#|` + 半角スペース3個 + `- キャプション`\n   - ラベルは共有するが、個別のプロットを参照する場合は`fig-two-plots-1`（左）と`fig-two-plots-2`（右）\n\n:::: {.columns}\n::: {.column width=50%}\n**Input:**\n\n```{{r}}\n#| label: fig-two-plots\n#| layout-ncol: 2\n#| fig-cap: \n#|   - \"左の図\"\n#|   - \"右の図\"\nplot(cars)\nplot(pressure)\n```\n:::\n\n::: {.column width=50%}\n**Output:**\n\n```{r}\n#| label: fig-two-plots\n#| layout-ncol: 2\n#| fig-cap: \n#|   - \"左の図\"\n#|   - \"右の図\"\nplot(cars)\nplot(pressure)\n```\n:::\n::::\n\n## 複数の図表のキャプション（2）\n\n- `tbl-cap`（共通キャプション）と`tbl-subcap`（サブキャプション）を指定\n   - 個別の図表を参照する方法は前頁と同じ\n\n:::: {.columns}\n::: {.column width=50%}\n**Input:**\n\n```{{r}}\n#| label: tbl-three-tables\n#| layout-ncol: 3\n#| tbl-cap: irisデータセット\n#| tbl-subcap: \n#|   - \"setosa\"\n#|   - \"versicolor\"\n#|   - \"virginica\"\ngt(iris[1:5, 1:2])\ngt(iris[51:55, 1:2])\n```\n:::\n\n::: {.column width=50%}\n**Output:**\n\n```{r}\n#| echo: true\n#| label: tbl-three-tables\n#| layout-ncol: 3\n#| tbl-cap: irisデータセット\n#| tbl-subcap: \n#|   - \"setosa\"\n#|   - \"versicolor\"\n#|   - \"virginica\"\ngt(iris[1:5, 1:2])\ngt(iris[51:55, 1:2])\ngt(iris[101:105, 1:2])\n```\n:::\n::::\n\n\n## YAMLヘッダー内のチャンクオプション\n\nYAMLヘッダー内で指定したチャンクオプションは[**すべてのチャンク**]{.alert}に適用される\n\n- `knitr` > `opts_chunk`内に指定\n- 一部のオプション名に注意\n   - 例）`fig-width`と`fig.width`、`fig-dpi`と`dpi`など\n- 例）すべてのチャンクに`dpi: 300`、`dev: ragg_png`オプションを付けたい場合\n\n````yaml\n---\ntitle: タイトル\nauthor: 作成者名\nknitr:\n  opts_chunk: \n    dpi: 300\n    dev: ragg_png\n---\n````\n\n## その他のオプション\n\nQuartoの公式ホームページかknitrエンジンのマニュアルを参照\n\n- <https://quarto.org/docs/reference/cells/cells-knitr.html>\n- <https://yihui.org/knitr/options/>\n","srcMarkdownNoYaml":"\n\n```{r}\n#| include: false\npacman::p_load(tidyverse, gt)\n```\n\n{{< include _common.qmd >}}\n\n# **1** はじめてのQuarto\n\n## とりあえずレンダー（1）\n\n1. File > New File > Quarto Document\n\n![](figs/markdown/render_1.png){fig-align=\"center\"}\n\n## とりあえずレンダー（2）\n\n2. 「Editor: User visual markdown editor」のチェックを外す\n\n![](figs/markdown/render_2.png){fig-align=\"center\"}\n\n## とりあえずレンダー（3）\n\n3. Sourceペイン上段の「Render」をクリック\n\n![](figs/markdown/render_3.png){fig-align=\"center\"}\n\n## とりあえずレンダー（4）\n\n4. ソースコードとViewerペインの出力物の対応関係を確認\n\n![](figs/markdown/render_4.png){fig-align=\"center\" width=80%}\n\n## Quartoファイルの構造\n\n````md\n---\nYAMLヘッダー\n---\n\nテキスト1\n\n```{{r}}\nチャンク\n```\n\nテキスト2\n````\n\n- [**YAMLヘッダー**]{.alert}：文書のメタ情報や見た目などに関する設定。**YAML文法**で記述\n- 本文\n   - [**テキスト**]{.alert}：そのまま出力される。**Markdown文法**で記述\n   - [**チャンク**]{.alert}：チャンク内の**Rコード**は評価され、出力される。\n\n# **2** Markdown文法\n\n## 様々なMarkdown記法\n\nQuartoのMarkdown記法は以下の記法をほとんど内包し、+ $\\alpha$の機能も多い。\n\n- CommonMark\n   - John Gruber[（とAaron Swartz）]{.small}が考案したMarkdown記法の標準化\n- GitHub Flavored Markdown[（GFM）]{.small}\n   - CommonMarkに表、自動リンク、取り消し線などを追加した記法\n- Markdown Extra、MultiMarkdown、Markua、...\n   - 脚注、数式、引用、相互参照、...\n\n\n## 改行と強調\n\n- 改行は必ず**2回改行**すること（1回改行は同じ行として認識される）\n\n:::: {.columns}\n::: {.column width=50%}\n**Input:**\n\n```md\n文章1\n文章2\n\n文章3\n```\n:::\n\n::: {.column width=50%}\n**Output:**\n\n文章1\n文章2\n\n文章3\n:::\n::::\n\n- イタリックは`*`、太字は`**`、取り消しは`~~`で囲む^[下線は用意されていないため、HTMLタグを使用する（`<u>`と`</u>`で囲むなど）。]。\n\n:::: {.columns}\n::: {.column width=50%}\n**Input:**\n\n```md\n*Italic*\n\n**太字**\n\n~~取り消し~~\n```\n:::\n\n::: {.column width=50%}\n**Output:**\n\n*Italic*\n\n**太字**\n\n~~取り消し~~\n:::\n::::\n\n## 見出し\n\n- 部、章、節、項、...の見出し（`#`の数が多いほど文字が小さくなる）\n   - `#`は6つまで\n- 章の見出しを`##`にするなら節は`###`、小節（または項）は`####`、...\n\n:::: {.columns}\n::: {.column width=50%}\n**Input:**\n\n```md\n# 見出し1\n\n## 見出し2\n\n### 見出し3\n\n#### 見出し3\n```\n:::\n\n::: {.column width=50%}\n**Output:**\n\n<font style=\"font-size:2em;font-weight:600;\">見出し1</font>\n\n<font style=\"font-size:1.75em;font-weight:600;\">見出し2</font>\n\n<font style=\"font-size:1.5em;font-weight:600;\">見出し3</font>\n\n<font style=\"font-size:1.25em;font-weight:600;\">見出し4</font>\n:::\n::::\n\n## リンク\n\n`[リンク文](URL)`：`[]`で囲まれた文章をクリックすると`()`内で指定したURLへ移動\n\n- `{target=\"_blank\"}`を付けると新しいタブで開くようになる[（Quarto仕様）]{.small}^[YAMLヘッダーで`link-external-newwindow: true`を指定すると、すべてのリンクが新しいタブで開くようになる。]。\n\n**Input:**\n\n```md\n[宋のHP](https://www.jaysong.net)\n\n[関大のHP](https://www.kansai-u.ac.jp/){target=\"_blank\"}\n```\n\n**Output:**\n\n[宋のHP](https://www.jaysong.net)\n\n[関大のHP](https://www.kansai-u.ac.jp/){target=\"_blank\"}\n\n## 脚注\n\n- 脚注の入れ方：`^[脚注の内容]`\n- 内容が長い場合、`[^識別子]`で脚注の位置だけ指定し、別の箇所に`[^識別子]: 脚注の内容`\n\n:::: {.columns}\n::: {.column width=50%}\n**Input:**\n\n```md\n家系ラーメン^[横浜]が食べたい。\n\nラーメン二郎[^jiro]も食べたい。\n\n[^jiro]: 港区（東京）\n```\n:::\n\n::: {.column width=50%}\n**Output:**\n\n家系ラーメン^[横浜]が食べたい。\n\nラーメン二郎[^jiro]も食べたい。\n\n[^jiro]: 港区（東京）\n:::\n::::\n\n## コメント\n\n出力に影響されないコメントを入れる場合\n\n- HTMLのコメント機能を使用：`<!--`と`-->`内に囲む\n   - `<!--`と`-->`の間の文章は出力されない\n- 自分用のメモ、とりあえず出力させない内容などに使用\n\n:::: {.columns}\n::: {.column width=50%}\n**Input:**\n\n```md\nこれは文章1です。\n\n<!--\nこれはコメントです。\n-->\n\nこれは文章2です。\n```\n:::\n\n::: {.column width=50%}\n**Output:**\n\nこれは文章1です。\n\n<!--\nこれはコメントです。\n-->\n\nこれは文章2です。\n:::\n::::\n\n## 箇条書き（順序なし）\n\n- `-` + 半角スペース + 内容\n   - 入れ子型の箇条書きは半角スペース2つ以上の字下げ\n   - `-`の代わりに`*`も可\n\n:::: {.columns}\n::: {.column width=50%}\n**Input:**\n\n```md\n- 項目1\n  - 項目1-1\n  - 項目1-2\n    - 項目1-2-1\n      - 項目1-2-1-1\n    - 項目1-2-2\n- 項目2\n- 項目3\n```\n:::\n\n::: {.column width=50%}\n**Output:**\n\n- 項目1\n  - 項目1-1\n  - 項目1-2\n    - 項目1-2-1\n      - 項目1-2-1-1\n    - 項目1-2-2\n- 項目2\n- 項目3\n:::\n::::\n\n## 箇条書き（順序あり）\n\n- `1.` + 半角スペース + 内容\n   - 番号は自動的に振られるが、`1.`の代わりに`2.`を使うと2からスタート\n   - `1.`、`2.`、`3.`、...の書き方も可（非推奨）\n\n:::: {.columns}\n::: {.column width=50%}\n**Input:**\n\n```md\n1. 項目1\n   1. 項目1-1\n   1. 項目1-2\n   1. 項目1-3\n2. 項目2\n   * 項目2-1\n   * 項目2-2\n3. 項目3\n```\n:::\n\n::: {.column width=50%}\n**Output:**\n\n1. 項目1\n   1. 項目1-1\n   3. 項目1-2\n   2. 項目1-3\n2. 項目2\n   * 項目2-1\n   * 項目2-2\n3. 項目3\n:::\n::::\n\n## 表\n\n- 行は改行（1回） + 列は`|`で表記\n- ただし、1行目（ヘッダー）と2行目（ボディー）の間には`-`を1つ以上入れる\n   - `:-`は左揃え、`-:`は右揃え、`:-:`は中央揃え（`-`のみは左揃え）\n\n:::: {.columns}\n::: {.column width=50%}\n**Input:**\n\n```md\n|ID   |Name |Height|Favorite|\n|:---:|-----|-----:|:-------|\n|1    |SONG |176   |Ramen   |\n|2    |Yanai|230   |Cat food|\n```\n:::\n\n::: {.column width=50%}\n**Output:**\n\n|ID   |Name |Height|Favorite|\n|:---:|-----|-----:|:-------|\n|1    |SONG |176   |Ramen   |\n|2    |Yanai|230   |Cat food|\n:::\n::::\n\n:::: {.columns}\n::: {.column width=50%}\n**Input:**\n\n```md\n|ID|Name|Height|Favorite|\n|:-:|-|-:|:-|\n|1|SONG|176|Ramen|\n|2|Yanai|230|Cat food|\n```\n:::\n\n::: {.column width=50%}\n**Output:**\n\n|ID|Name|Height|Favorite|\n|:-:|-|-:|:-|\n|1|SONG|176|Ramen|\n|2|Yanai|230|Cat food|\n:::\n::::\n\n## 図\n\n- `![代替テキスト](画像のパス/URL)`\n   - 代替テキストはキャプションとしても機能する\n\n**Input:**\n\n```md\n![R Cat](https://www.jaysong.net/imgs/favicon.png)\n```\n\n**Output:**\n\n![R Cat](https://www.jaysong.net/imgs/favicon.png)\n\n## 図の大きさ\n\n- `{width=図の幅}`を追加[（Quarto限定）]{.small}\n   -  例）`300`（300ピクセル）、`1in`（1インチ）、`25%`（画面の25%）\n\n:::: {.columns}\n::: {.column width=50%}\n**Input:**\n\n```md\n![Tiny cat](画像URL){width=30}\n\n![Big cat](画像URL){width=100}\n```\n:::\n\n::: {.column width=50%}\n**Output:**\n\n![Tiny cat](https://www.jaysong.net/imgs/favicon.png){width=30}\n\n![Big cat](https://www.jaysong.net/imgs/favicon.png){width=100}\n:::\n::::\n\n## 数式\n\n文中数式は`$数式$`、独立した行の数式は`$$`で囲む。\n\n:::: {.columns}\n::: {.column width=50%}\n**Input:**\n\n```md\n文中の数式：$e = mc^2$\n```\n:::\n\n::: {.column width=50%}\n**Output:**\n\n文中の数式の例：$e = mc^2$\n:::\n::::\n\n**Input:**\n\n```md\n$$\nF(x; \\mu, b) =\n\\begin{cases}\n   0.5 \\exp(\\frac{x - \\mu}{b})       & \\text{if} \\quad x < \\mu \\\\\n   1 - 0.5 \\exp(- \\frac{x - \\mu}{b}) & \\text{if} \\quad x \\geq \\mu\n\\end{cases}\n$$\n```\n\n**Output:**\n$$\nF(x; \\mu, b) =\n\\begin{cases}\n   0.5 \\exp(\\frac{x - \\mu}{b})       & \\text{if} \\quad x < \\mu \\\\\n   1 - 0.5 \\exp(- \\frac{x - \\mu}{b}) & \\text{if} \\quad x \\geq \\mu\n\\end{cases}\n$$\n\n## 複数の図表の配置\n\n`::: {layout-*=}`と`:::`の間に図表を入れる（`layout-ncol`、または`layout-nrow`）\n\n:::: {.columns}\n::: {.column width=50%}\n**Input:**\n\n````md\n::: {layout-ncol=4}\n![零号機](画像1のURL or パス)\n\n![初号機](画像2のURL or パス)\n\n![弐号機](画像3のURL or パス)\n\n![量産機](画像4のURL or パス)\n:::\n````\n\n**Output:**\n\n::: {layout-ncol=4}\n![零号機](figs/markdown/rcat_0.png){width=100}\n\n![初号機](figs/markdown/rcat_1.png){width=100}\n\n![弐号機](figs/markdown/rcat_2.png){width=100}\n\n![量産機](figs/markdown/rcat_3.png){width=100}\n:::\n:::\n\n::: {.column width=50%}\n**Input:**\n\n````md\n::: {layout-ncol=2}\n|ID   |Name |Favorite|\n|:---:|-----|:-------|\n|1    |SONG |Ramen   |\n\n|ID   |Name |Favorite|\n|:---:|-----|:-------|\n|2    |Yanai|Cat food|\n:::\n````\n\n**Output:**\n\n::: {layout-ncol=2}\n|ID   |Name |Favorite|\n|:---:|-----|:-------|\n|1    |SONG |Ramen   |\n\n|ID   |Name |Favorite|\n|:---:|-----|:-------|\n|2    |Yanai|Cat food|\n:::\n\n:::\n::::\n\n# **3** Rコードとの統合\n\n## Rコードの入れ方\n\n[**チャンク[（chunk）]{.small}**]{.alert}内で記述されたRコードは評価[（evaluation）]{.small}される。\n\n- チャンクは```` ```{r} ````で始まり、```` ``` ````で終わる。\n- ショートカットキー：Cmd + Option + I（macOS）、Ctrl + Alt + I（その他のOS）\n\n:::: {.columns}\n::: {.column width=50%}\n**Input:**\n\n````\n以下のRコードは評価されない\n\nsum(1:100)\n\n```{{r}}\n# 以下はRコードは評価される\nsum(1:100)\n```\n\n````\n:::\n\n::: {.column width=50%}\n**Output:**\n\n以下のRコードは評価されない\n\nsum(1:100)\n\n```{r}\n#| echo: true\n# 以下はRコードは評価される\nsum(1:100)\n```\n:::\n::::\n\n## インラインコード\n\n[**インラインコード**[（inline code）]{.small}]{.alert}：チャンク外[（=文章内）]{.small}に挿入するRコード\n\n- チャンク内のRコードはRコードと評価結果、両方出力されるが、インラインコードは評価[結果のみ]{.alert}出力される。\n- ```` `r ````と```` ` ````の間にコードを記述（`r`を省略すると[コードのみ]{.alert}出力）\n   - チャンク内のオブジェクトを参照することも可能\n\n:::: {.columns}\n::: {.column width=50%}\n**Input:**\n\n````\n1〜100の総和：`r \"\\x60r sum(1:100)\\x60\"`\n\n```{{r}}\nx <- c(1, 2, 3, 5, 7)\n```\n\n`sum(x)`の実行結果：`r \"\\x60r sum(x)\\x60\"`\n````\n:::\n\n::: {.column width=50%}\n**Output:**\n\n1〜100の総和：`r sum(1:100)`\n\n```{r}\n#| echo: true\nx <- c(1, 2, 3, 5, 7)\n```\n\n`sum(x)`の実行結果：`r sum(x)`\n:::\n::::\n\n# **4** チャンクオプション\n\n## チャンクオプション\n\nチャンクの最上段で指定（コードより後ろのオプションは無視される）\n\n- `#|` + 半角スペース + `オプション名:` + 半角スペース + `値`\n- 1つのチャンクに複数のオプションも可\n- 論理型の値は`TRUE`/`FALSE`でなく、`true`/`false`\n\n```{{r}}\n#| オプション1: 値\n#| オプション2: 値\nRコード\n```\n\n## 代表的なチャンクオプション\n\n- `label`、`cahce`、`dependson`\n- `echo`、`eval`、`include`、`collapse`\n- `error`、`message`、`warning`\n- 図に関連するオプション\n   - `fig-width`、`fig-height`、`out-width`、`out-height`、`fig-dpi`、`dev`など\n- レイアウト、キャプション、サブキャプション\n\n## label：チャンクのラベル\n\n- チャンクにラベル[（名前）]{.small}を付ける理由\n   - レンダー時エラーが発生した際、どのチャンクが問題かが分かる。\n   - 図表番号の相互参照[（後述）]{.small}\n   - 他チャンクとの依存関係の指定[（後述）]{.small}\n- 付け方：`#| label: ラベル名`\n   - 図（表）を生成するチャンクは接頭詞として`fig-`（`tab-`）を付ける。\n- ラベル指定によって処理結果や見た目が変わることはない\n\n:::: {.columns}\n::: {.column width=50%}\n**Input:**\n\n````\n```{{r}}\n#| label: my-chunk\nx <- 1:10\nsum(x)\n```\n````\n:::\n\n::: {.column width=50%}\n**Output:**\n\n```{r}\n#| label: my-chunk\n#| echo: true\nx <- 1:10\nsum(x)\n```\n:::\n::::\n\n## cache：処理結果の保存\n\n- チャンク内コードの実行時間が非常に長い場合\n   - `#| cache: true`：処理結果を最初のレンダー時に別途保存し、チャンク内コードに変更がない限り、その結果を参照\n- 注意：当該チャンクが別のチャンクに依存していても、当該チャンクのコードの変更がなければ処理結果は変わらない\n\n:::: {.columns}\n::: {.column width=50%}\n**Input:**\n\n````\n```{{r}}\nx <- 1:10\n```\n\n```{{r}}\n#| cache: true\nsum(x)\n```\n````\n:::\n\n::: {.column width=50%}\n**Output:**\n\n```{r}\n#| echo: true\nx <- 1:10\n```\n\n```{r}\n#| echo: true\nsum(x)\n```\n\n- しかし、1番目のコードが`x <- 1:100`になっても、２番目のコードは変わっていないため、`sum(x)`の結果は55のまま\n:::\n::::\n\n## dependson：チャンク間の依存関係\n\n- 依存されるチャンクにラベルを指定し、依存するチャンクには`dependson`オプションを追加\n\n:::: {.columns}\n::: {.column width=50%}\n**Example:**\n\n````\n```{{r}}\n#| label: my-chunk-01\nx <- 1:10\n```\n\n```{{r}}\n#| cache: true\n#| dependson: my-chunk-01\nsum(x)\n```\n````\n:::\n\n::: {.column width=50%}\n- これで問題なく作動したが、2026年1月12月現在、宋の環境では機能しない\n- `#| autodep: true`をすると、自動的に依存関係を検知してくれるらしいが、これも機能しない\n:::\n::::\n\n## echo、eval：コード、評価結果の出力\n\n- いずれも既定値は`true`\n   - `#| echo: false`：コードを出力しない（評価はする）\n   - `#| eval: false`：評価しない（コードは出力する）\n\n:::: {.columns}\n::: {.column width=50%}\n**Input（1）:**\n\n```{{r}}\n#| echo: false\nsum(1:100)\n```\n:::\n\n::: {.column width=50%}\n**Output（1）:**\n\n```{r}\n#| eval: true\n#| echo: false\nprint(\"Hi!\")\n```\n:::\n::::\n\n:::: {.columns}\n::: {.column width=50%}\n**Input（2）:**\n\n```{{r}}\n#| eval: false\nsum(1:100)\n```\n:::\n\n::: {.column width=50%}\n**Output（2）:**\n\n```{r}\n#| eval: false\n#| echo: true\nprint(\"Hi!\")\n```\n:::\n::::\n\n## include：評価のみ行う\n\n- `#| include: false`：コード、評価結果いずれも出力しない\n   - しかし、[**コードの評価は行う**]{.alert}。\n   - `echo: false`＆`eval: false`はコードを評価しない\n\n:::: {.columns}\n::: {.column width=50%}\n**Input:**\n\n````md\n```{{r}}\n#| include: false\nhidden_x <- 1:10\n```\n\n```{{r}}\nsum(hidden_x)\n```\n````\n:::\n\n::: {.column width=50%}\n**Output:**\n\n```{r}\n#| eval: true\n#| echo: true\n#| include: false\nhidden_x <- 1:10\n```\n\n```{r}\n#| eval: true\n#| echo: true\nsum(hidden_x)\n```\n:::\n::::\n\n## collapse：コードと評価結果をまとめる\n\nコードと評価結果を同一ブロックにまとめる（既定値は`false`）\n\n<!--\n- 縦スペースの節約\n- 対話型のコードなら可読性も上がる\n- 評価結果もブロックにはいるので、より文章と区分される\n-->\n\n:::: {.columns}\n::: {.column width=50%}\n**Input（1）:**\n\n```{{r}}\nprint(\"Hi!\")\nsum(1:100)\n```\n:::\n\n::: {.column width=50%}\n**Output（1）:**\n\n```{r}\n#| echo: true\nprint(\"Hi!\")\nsum(1:100)\n```\n:::\n::::\n\n:::: {.columns}\n::: {.column width=50%}\n**Input（2）:**\n\n```{{r}}\n#| collapse: true\nprint(\"Hi!\")\nsum(1:100)\n```\n:::\n\n::: {.column width=50%}\n**Output（2）:**\n\n```{r}\n#| echo: true\n#| collapse: true\nprint(\"Hi!\")\nsum(1:100)\n```\n:::\n::::\n\n## 各種メッセージの出力\n\n- 警告メッセージ（`warning`）、通常のメッセージ（`message`）のON/OFF\n   - 既定値は`true`\n   - {tidyverse}の読み込み、`read_csv()`によるファイルの読込時に表示されるメッセージが鬱陶しいなら`#| message:false`\n- `error`：エラーメッセージの出力\n   - 既定値（`false`）のままだと、レンダーが中止される\n   - `#| error: true`の場合、レンダーは中止されず最後のチャンクまで評価される。エラーメッセージは出力物に出力される。\n\n## 図の大きさ\n\n- 図そのものの大きさ：`fig-width`と`fig-height`\n   - 単位はインチ\n- 出力物上での大きさ：`out-width`と`out-height`\n   - 単位はインチ[（`3in`）]{.small}、センチ[（`8cm`）]{.small}、px[（`500px`）]{.small}、割合[（`75%`）]{.small}\n- 図の解像度：`fig-dpi`\n   - 既定値は96だが、PDF出力や印刷をする場合、最低でも300は必要\n   - 解像度が高いほどファイルのサイズが大ききなるため注意\n- 作図エンジン：`dev`\n   - `dev: ragg_png`にしておけば、とりあえず文字化けの心配はない[（{ragg}が必要）]{.small}\n   - すべてのチャンクに指定することは非効率的なので、YAMLヘッダーで指定することを推奨[（後述）]\n\n## 図表のキャプション\n\n- `fig-cap`（図）と`tbl-cap`（表）：ラベルと組み合わせると「図1. ...」\n   - 注意：図（表）を生成するチャンクのラベルは`fig-`（`tbl-`）で始める\n\n:::: {.columns}\n::: {.column width=50%}\n**Input:**\n\n```{{r}}\n#| tbl-cap: \"表のキャプション\"\ngt(iris[1:3,])\n```\n:::\n\n::: {.column width=50%}\n**Output:**\n\n```{r}\n#| echo: true\n#| tbl-cap: \"表のキャプション\"\ngt(iris[1:3,])\n```\n:::\n::::\n\n:::: {.columns}\n::: {.column width=50%}\n**Input（2）:**\n\n```{{r}}\n#| echo: false\n#| label: fig-myfig-01\n#| fig-cap: \"図のキャプション\"\nplot(rnorm(100), type = \"l\")\n```\n:::\n\n::: {.column width=50%}\n**Output（2）:**\n\n```{r}\n#| echo: false\n#| label: fig-myfig-01\n#| fig-cap: \"図のキャプション\"\nplot(rnorm(100), type = \"l\")\n```\n:::\n::::\n\n## 複数の図表の配置（1）\n\n- `#| layout-ncol: 2`にするとチャンク内の図は2列構成で配置される\n   - Rコードで生成される表（{gt}など）も可\n\n:::: {.columns}\n::: {.column width=50%}\n**Input:**\n\n```{{r}}\n#| layout-ncol: 2\nplot(1:10)\n\nplot(rnorm(10), type = \"l\")\n```\n:::\n\n::: {.column width=50%}\n**Output:**\n\n```{r}\n#| layout-ncol: 2\n#| echo: true\n#| fig-width: 3\n#| fig-height: 3\n#| fig-dpi: 120\nplot(1:10)\n\nplot(rnorm(10), type = \"l\")\n```\n:::\n::::\n\n## 複数の図表の配置（2）\n\n- `#| layout`でカスタムレイアウト　　　　　　　　　　　\n\n:::: {.columns}\n::: {.column width=50%}\n**Input:**\n\n```{{r}}\n#| layout: [[50, 50], [100]]\nplot(1:10)\n\nplot(rnorm(10), type = \"l\")\n```\n\n- 2行構成で1行目は図2枚を50%、50%の割合、2行目は1枚を配置した例\n   - `[49, -2, 49]`にすると、49% + 2%の余白 + 49%\n:::\n\n::: {.column width=50%}\n**Output:**\n\n```{r}\n#| layout: [[50, 50], [100]]\n#| echo: true\n#| fig-dpi: 120\nplot(1:10)\n\nplot(rnorm(10))\n\nplot(rnorm(10), type = \"l\")\n```\n:::\n::::\n\n## 複数の図表のキャプション（1）\n\n- `#| fig-cap:`（`tbl-cap`）後に改行し、`#|` + 半角スペース3個 + `- キャプション`\n   - ラベルは共有するが、個別のプロットを参照する場合は`fig-two-plots-1`（左）と`fig-two-plots-2`（右）\n\n:::: {.columns}\n::: {.column width=50%}\n**Input:**\n\n```{{r}}\n#| label: fig-two-plots\n#| layout-ncol: 2\n#| fig-cap: \n#|   - \"左の図\"\n#|   - \"右の図\"\nplot(cars)\nplot(pressure)\n```\n:::\n\n::: {.column width=50%}\n**Output:**\n\n```{r}\n#| label: fig-two-plots\n#| layout-ncol: 2\n#| fig-cap: \n#|   - \"左の図\"\n#|   - \"右の図\"\nplot(cars)\nplot(pressure)\n```\n:::\n::::\n\n## 複数の図表のキャプション（2）\n\n- `tbl-cap`（共通キャプション）と`tbl-subcap`（サブキャプション）を指定\n   - 個別の図表を参照する方法は前頁と同じ\n\n:::: {.columns}\n::: {.column width=50%}\n**Input:**\n\n```{{r}}\n#| label: tbl-three-tables\n#| layout-ncol: 3\n#| tbl-cap: irisデータセット\n#| tbl-subcap: \n#|   - \"setosa\"\n#|   - \"versicolor\"\n#|   - \"virginica\"\ngt(iris[1:5, 1:2])\ngt(iris[51:55, 1:2])\n```\n:::\n\n::: {.column width=50%}\n**Output:**\n\n```{r}\n#| echo: true\n#| label: tbl-three-tables\n#| layout-ncol: 3\n#| tbl-cap: irisデータセット\n#| tbl-subcap: \n#|   - \"setosa\"\n#|   - \"versicolor\"\n#|   - \"virginica\"\ngt(iris[1:5, 1:2])\ngt(iris[51:55, 1:2])\ngt(iris[101:105, 1:2])\n```\n:::\n::::\n\n\n## YAMLヘッダー内のチャンクオプション\n\nYAMLヘッダー内で指定したチャンクオプションは[**すべてのチャンク**]{.alert}に適用される\n\n- `knitr` > `opts_chunk`内に指定\n- 一部のオプション名に注意\n   - 例）`fig-width`と`fig.width`、`fig-dpi`と`dpi`など\n- 例）すべてのチャンクに`dpi: 300`、`dev: ragg_png`オプションを付けたい場合\n\n````yaml\n---\ntitle: タイトル\nauthor: 作成者名\nknitr:\n  opts_chunk: \n    dpi: 300\n    dev: ragg_png\n---\n````\n\n## その他のオプション\n\nQuartoの公式ホームページかknitrエンジンのマニュアルを参照\n\n- <https://quarto.org/docs/reference/cells/cells-knitr.html>\n- <https://yihui.org/knitr/options/>\n"},"formats":{"revealjs":{"identifier":{"display-name":"RevealJS","target-format":"revealjs","base-format":"revealjs"},"execute":{"fig-width":10,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":"auto","echo":false,"output":true,"warning":false,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":true,"self-contained-math":false,"format-resources":[],"html-table-processing":"none"},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","html-math-method":{"method":"mathjax","url":"https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"},"slide-level":2,"to":"revealjs","metadata-files":["style/slide.yml"],"output-file":"markdown_slide.html"},"language":{"toc-title-document":"目次","toc-title-website":"目次","related-formats-title":"その他のフォーマット","related-notebooks-title":"Notebooks","source-notebooks-prefix":"ソース","other-links-title":"その他のリンク","code-links-title":"コードリンクス","launch-dev-container-title":"Devコンテナを起動する","launch-binder-title":"ランチ Binder","article-notebook-label":"記事ノート","notebook-preview-download":"ノートブックをダウンロード","notebook-preview-download-src":"ソースコードをダウンロードする","notebook-preview-back":"記事に戻る","manuscript-meca-bundle":"MECAアーカイブ","section-title-abstract":"概要","section-title-appendices":"付録","section-title-footnotes":"脚注","section-title-references":"参考文献","section-title-reuse":"ライセンス","section-title-copyright":"著作権","section-title-citation":"引用","appendix-attribution-cite-as":"引用方法","appendix-attribution-bibtex":"BibTeX","appendix-view-license":"ライセンスを表示","title-block-author-single":"作者","title-block-author-plural":"作者","title-block-affiliation-single":"所属","title-block-affiliation-plural":"所属","title-block-published":"公開","title-block-modified":"更新日","title-block-keywords":"キーワード","callout-tip-title":"ヒント","callout-note-title":"ノート","callout-warning-title":"警告","callout-important-title":"重要","callout-caution-title":"注意","code-summary":"コード","code-tools-menu-caption":"コード","code-tools-show-all-code":"すべてのコードを表示","code-tools-hide-all-code":"すべてのコードを非表示","code-tools-view-source":"ソースコードを表示","code-tools-source-code":"ソースコード","tools-share":"Share","tools-download":"Download","code-line":"ライン","code-lines":"ライン","copy-button-tooltip":"コピー","copy-button-tooltip-success":"コピーしました","repo-action-links-edit":"編集","repo-action-links-source":"ソースコード","repo-action-links-issue":"問題を報告","back-to-top":"トップに戻る","search-no-results-text":"一致なし","search-matching-documents-text":"一致した文書","search-copy-link-title":"検索へのリンクをコピー","search-hide-matches-text":"追加の検索結果を非表示","search-more-match-text":"追加の検索結果","search-more-matches-text":"追加の検索結果","search-clear-button-title":"消去","search-text-placeholder":"","search-detached-cancel-button-title":"取消","search-submit-button-title":"検索","search-label":"サーチ","toggle-section":"セクションを切り替え","toggle-sidebar":"サイドバーを切り替える","toggle-dark-mode":"ダークモードの切り替え","toggle-reader-mode":"リーダーモードの切り替え","toggle-navigation":"ナビゲーションを切り替える","crossref-fig-title":"図","crossref-tbl-title":"表","crossref-lst-title":"コード","crossref-thm-title":"定理","crossref-lem-title":"補題","crossref-cor-title":"系","crossref-prp-title":"命題","crossref-cnj-title":"予想","crossref-def-title":"定義","crossref-exm-title":"例","crossref-exr-title":"練習","crossref-ch-prefix":"チャプター","crossref-apx-prefix":"付録","crossref-sec-prefix":"セクション","crossref-eq-prefix":"式","crossref-lof-title":"図一覧","crossref-lot-title":"表一覧","crossref-lol-title":"コード一覧","environment-proof-title":"証明","environment-remark-title":"注釈","environment-solution-title":"解答","listing-page-order-by":"並び替え","listing-page-order-by-default":"デフォルト","listing-page-order-by-date-asc":"日付（昇順）","listing-page-order-by-date-desc":"日付（降順）","listing-page-order-by-number-desc":"ページ番号（降順）","listing-page-order-by-number-asc":"ページ番号（昇順）","listing-page-field-date":"日付","listing-page-field-title":"題名","listing-page-field-description":"説明","listing-page-field-author":"作者","listing-page-field-filename":"ファイル名","listing-page-field-filemodified":"更新日","listing-page-field-subtitle":"副題","listing-page-field-readingtime":"読了目安","listing-page-field-wordcount":"単語数","listing-page-field-categories":"分類","listing-page-minutes-compact":"{0} 分","listing-page-category-all":"すべて","listing-page-no-matches":"一致なし","listing-page-words":"{0}語","listing-page-filter":"フィルター","draft":"下書き"},"metadata":{"lang":"ja","fig-responsive":false,"quarto-version":"1.8.26","auto-stretch":false,"title":"3/ Markdown文法の基礎","modified-date":"today","subtitle":"Quartoを使った研究成果と分析プロセスの共有","author":"宋財泫（関西大学）","knitr":{"opts_chunk":{"dev":"ragg_png","dev.args":{"background":"transparent"},"dpi":300,"fig.align":"center","fig.width":6,"fig.height":3,"echo":false,"message":false,"warning":false,"error":true}},"footer":"Markdown文法の基礎","theme":["default","style/slide.scss"],"width":1200,"height":900,"header-logo-link":"https://www.jaysong.net/","slideNumber":"c/t"}}},"projectFormats":["html"]}